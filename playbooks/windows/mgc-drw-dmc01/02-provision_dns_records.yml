---
- name: Provision DNS records
  hosts: windows_servers
  collections:
    - ansible.windows
  vars:
    dns_zone: prod.megacorp.industries
  tasks:
    - name: Configure DNS records
      win_dns_record:
        zone: '{{ dns_zone }}'
        name: '{{ item.name }}'
        type: '{{ item.type }}'
        value: '{{ item.value }}'
        state: '{{ item.state }}'
      loop: '{{ dns_records }}'
